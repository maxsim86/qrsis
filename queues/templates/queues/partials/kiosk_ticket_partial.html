<style>
    /* Gunakan wrapper FIXED supaya sentiasa center di skrin */
    .kiosk-wrapper {
        position: fixed; /* UBAH SINI: Dari absolute ke fixed */
        top: 0; left: 0; right: 0; bottom: 0;
        width: 100%; height: 100%;
        display: flex; 
        justify-content: center; /* Center Horizontal (Kiri-Kanan) */
        align-items: center;     /* Center Vertical (Atas-Bawah) */
        background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
        z-index: 9999; /* Pastikan ia paling atas */
    }

    .ticket-card {
        background: white;
        padding: 50px 40px;
        border-radius: 30px;
        text-align: center;
        box-shadow: 0 25px 50px rgba(0,0,0,0.15);
        max-width: 500px;
        width: 90%;
        animation: popUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .ticket-number {
        font-size: 5rem;
        font-weight: 800;
        color: #2563eb;
        line-height: 1;
        margin: 20px 0;
        background: #eff6ff;
        padding: 20px;
        border-radius: 20px;
        border: 2px dashed #bfdbfe;
    }

    @keyframes popUp { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }
</style>

<div class="kiosk-wrapper">
    <div class="ticket-card">
        <div style="font-size: 5rem;">ðŸŽ‰</div>
        <h2 class="fw-bold mt-3 text-dark">Pendaftaran Berjaya!</h2>
        
        <div class="text-muted mt-2">Nombor giliran anda:</div>
        
        <div class="ticket-number">
            {{ new_ticket.ticket_number }}
        </div>
        
        <h4 class="fw-bold text-dark">{{ new_ticket.name }}</h4>
        <p class="text-muted small">Sila tunggu nombor anda dipanggil</p>

        <div class="w-100 bg-light rounded-pill mt-4 mb-3 overflow-hidden" style="height: 6px;">
            <div id="progress-bar" style="width: 100%; height: 100%; background: #3b82f6; transition: width 5s linear;"></div>
        </div>
        
        <button id="btn-reset"
                hx-get="{% url 'kiosk_join' new_ticket.queue.slug %}" 
                hx-target="#kiosk-frame" 
                hx-swap="innerHTML"
                class="btn btn-secondary rounded-pill px-4">
            Selesai (Auto tutup 5s)
        </button>
    </div>
</div>

<script>
    // 1. Jalankan animasi bar
    setTimeout(() => {
        const bar = document.getElementById('progress-bar');
        if(bar) bar.style.width = "0%";
    }, 100);

    // 2. Auto Click butang reset selepas 5 saat
    setTimeout(function() {
        const btn = document.getElementById('btn-reset');
        if(btn) {
            // Trigger HTMX request pada butang tersebut
            htmx.trigger(btn, 'click');
        }
    }, 5000);
</script>